## cafe_macine

- 메뉴 : espresso, latte, cappuccino
- 재료 : water, milk, coffee
- 동작 :
1. 고객에게 음료를 선택하게 합니다.
2. 종업원이 report라는 키워드를 입력하면 상품 재고를 확인할 수 있습니다.
3. 금액 총합 출력
4. 고객에게 금액을 입력 받습니다.
- 지폐의 갯수를 입력받습니다.
5. 사용자가 음료의 금액보다 많은 금액을 지불했다면 잔돈을 반환합니다.
6. 음료를 만들기 전에 음료 재고와 매출을 업데이트합니다.
7. 음료를 제공할 때 Here is your latte. Enjoy! 라는 문구를 출력합니다.
8. 시스템 종료

#### 어떤 부분을 업그레이드 할 수 있을까(아이디어)?
1. 고객이 금액에 맞는 충분한 금액을 지불했다면 다음 금액을 입력을 받지 않는다.
- 금액을 입력 받고, 만약 지불한 금액이 커피값보다 크다면 지금까지 지불한 금액을 반환한다.

2. 영수증 출력
- 커피값, 지불 금액, 거스름 돈 출력

3. 상품의 종류를 늘린다.(메뉴 데이터베이스를 만든다.)
4. 새로운 나온 상품을 추천한다.
5. 상품 재고를 확인하는 방식을 바꾼다.
6. 상품 종류를 제대로 입력하지 않았을 시 예외를 발생시킨다.

#### 문제 발생
1. 커피를 주문하고 재고를 업데이트 하기 전에 고객이 충분한 금액을 넣었는 지 확인하는 부분에서 print문이 실행되는 문제 발생.
```
if check_coins(coin_sum, menu, order):
    # 사용자가 충분한 금액을 지불했다면
``` 
이렇게 if문 안에 함수를 실행하면 고객이 충분한 금액을 지불했는지 확인할 수 있지만 함수 전체를 실행하기 때문에 함수 안에 있는 print문까지 실행하는 오류를 발생시킨다.

- 해결책 :
카페 프로그램 함수 안에서 호출하고 있는 check_coins함수가 반환하는 값을 변수에 담아서 제공해주는 방법을 선택.

#### 업그레이드 된 부분
1. 출력문을 전부 한글로 변경.
2. 충분한 금액을 지불했다면 추가 금액을 입력 받지 않습니다.
3. 영수증을 출력해줍니다.
```
def receipt(coin_sum, menu, order):
  """커피값, 지불 금액, 거스름 돈 출력"""

  # 커피값 출력
  print(f"음료값 : {menu[order]['cost']}")

  # 지불 금액 출력
  print(f"지불하신 금액 : {coin_sum}")

  # 거스름 돈 출력
  change = coin_sum - menu[order]['cost']
  print(f"반환받으실 금액 : {change}")  
```
4. check_coins함수를 삭제했습니다.
```
def check_coins(coin_sum, menu, order):
  """사용자가 음료 가격보다 많은 돈을 지불했는지 검사하고, 맞다면 잔돈을 반환"""
  # TODO 4: check transaction successful?
  # 사용자가 음료의 금액에 맞는 돈을 넣었는지 검사해야 한다.

  if coin_sum > menu[order]['cost']:
    # 음료의 금액보다 사용자가 지불한 금액이 크다면 잔돈을 반환해줘야 합니다.
    print(f"{coin_sum - menu[order]['cost']}원을 반환해 드리겠습니다.")
    return True
  else:
    # 만약 사용자가 금액보다 부족한 돈을 넣었다면 “돈을 반환해주겠다는”문구를 출력한다.
    print("죄송합니다. 금액이 충분하지 않습니다. 넣으신 돈을 다시 반환해 드리겠습니다.")
    return False
```
5. resource_update함수에서 지불 금액 체크 부분을 삭제했습니다.
- 대신 process_coins함수에서 지불 금액이 맞는지 체크하고, 맞다면 재고수량 차감 or 틀리면 금액이 충분하지 않다는 메시지를 출력합니다.
```
# 사용자의 지폐을 입력받고, 고객이 지불한 금액이 충분한지 체크
        There_is_not_enough = process_coins(MENU, order)

        if There_is_not_enough:
          # 만약 지불 금액이 충분하지 않다면
          print("죄송합니다. 금액이 충분하지 않습니다. 넣으신 돈을 다시 반환해 드리겠습니다.")
        else:
          # 재고에 있는 수량을 차감
          resource_update(MENU, order)
```
